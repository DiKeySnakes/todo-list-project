(()=>{"use strict";let e=document.getElementById("form"),t=document.getElementById("priorityInput"),n=document.getElementById("textInput"),a=document.getElementById("dateInput"),o=document.getElementById("textarea"),l=document.getElementById("msg"),r=document.getElementById("tasks"),i=document.getElementById("add");const d=document.getElementById("tasks-template");e.addEventListener("submit",(e=>{e.preventDefault(),s()}));let s=()=>{""===n.value?(console.log("failure"),l.innerHTML="Task cannot be blank"):(console.log("success"),l.innerHTML="",m(),i.setAttribute("data-bs-dismiss","modal"),i.click(),i.setAttribute("data-bs-dismiss",""))},c=[],m=()=>{c.push({id:Date.now().toString(),priority:t.value,text:n.value,date:a.value,description:o.value}),localStorage.setItem("data",JSON.stringify(c)),console.log(c),u()},u=()=>{r.innerHTML="",c.forEach((e=>{const t=document.importNode(d.content,!0),n=t.querySelector("[data-tasks-div]");n.id=e.id,console.log(e.id);document.querySelector("data-priority");n.dataset.priority=e.priority,console.log(e.priority),t.querySelector("[data-task-name]").innerHTML=e.text,console.log(e.text),t.querySelector("[data-task-date]").innerHTML=e.date,console.log(e.date),t.querySelector("[data-task-description]").innerHTML=e.description,console.log(e.description),r.appendChild(t)})),e.reset()},g=e=>{e.target.parentElement.parentElement.remove(),c=c.filter((t=>t.id!==e.target.parentElement.parentElement.id)),localStorage.setItem("data",JSON.stringify(c)),console.log(c)};r.addEventListener("click",(e=>{if(e.target.classList.contains("fa-trash-alt"))g(e),u();else{if(!e.target.classList.contains("fa-edit"))return;(e=>{let t=e.target.parentElement.parentElement;n.value=t.children[0].innerHTML,a.value=t.children[1].innerHTML,o.value=t.children[2].innerHTML,g(e)})(e)}})),c=JSON.parse(localStorage.getItem("data"))||[],console.log(c),u()})();